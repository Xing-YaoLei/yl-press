# 浏览器篇

## 从输入URL到浏览器显示页面过程中都发生了什么？

### 通过DNS解析域名获取域名对应的IP地址

电脑会首先需要获取域名对应的IP地址，访问本地电脑的hosts文件，查看是否有对应的网站的IP地址，如果不存在则会查看缓存中是否有该浏览器的IP地址。

### 缓存

查看Cache-Control与Expires检查是否命中强缓存，如果命中强缓存，则直接读取本地的网页文件进行加载，而数据请求的状态也会变为Cache的读取

如果没有命中强缓存的情况下，则会向服务器发起请求，通过Etag以及Last-Modify与服务器确认本次数据内容与上次请求的时候的数据内容是否相同。如果没有任何更改的情况下，浏览器则读取本地的缓存进行页面的渲染，状态码为304

当强缓存和协商缓存都没有命中的情况下则拿到后端返回的数据进行渲染。

### TCP

与服务器建立TCP连接，具体详情查看[计算机网络篇](./计算机网络.md)

### 解析 & 渲染

浏览器从Web服务器上下载到的`HTML、CSS、Js`内容进行解析，首先将HTML代码进行解析为树状结构，当遇到`Style`标签的情况下则解析CSS，遇到`link`标签的情况下则进行异步下载CSS文件，完成后进行CSS解析，遇到`script`标签的情况下，则会判断是否为`src`的方式引入，如果为直接代码的书写则直接解析执行，否则则同步进行Js文件的下载，下载完成后进行解析。

浏览器的渲染引擎进行HTML以及CSS的页面渲染

浏览器的Js引擎则进行Js代码的执行，Js执行过程中可能会触发其余的DOM操作、数据请求等操作，浏览器进行执行。

### 服务器返回数据请求

服务器针对数据请求进行相应，完成页面的增删改查以及各项逻辑的执行。

### 事件循环

参照[事件循环篇](./Js.md)
