import{_ as n,o as s,c as a,e as t}from"./app.514c3089.js";const c={},e=t(`<h1 id="javascript-\u9762\u8BD5\u9898" tabindex="-1"><a class="header-anchor" href="#javascript-\u9762\u8BD5\u9898" aria-hidden="true">#</a> Javascript \u9762\u8BD5\u9898</h1><h3 id="\u4E8B\u4EF6\u5FAA\u73AF" tabindex="-1"><a class="header-anchor" href="#\u4E8B\u4EF6\u5FAA\u73AF" aria-hidden="true">#</a> \u4E8B\u4EF6\u5FAA\u73AF</h3><div class="custom-container tip"><p class="custom-container-title">\u63D0\u793A</p><p>\u4EFB\u52A1\u961F\u5217\uFF08Task Queue\uFF09</p><p>\u5B8F\u4EFB\u52A1\uFF08macro-task\uFF09</p><ul><li>script</li><li>setTimeout</li><li>setInterval</li><li>setImmediate</li></ul><p>\u5FAE\u4EFB\u52A1\uFF08micro-task\uFF09</p><ul><li>process.nextTick</li><li>Promise</li><li>Async/Await</li><li>MutationObserver</li></ul></div><p>\u603B\u4F53\u7684\u6267\u884C\u987A\u5E8F\u5C31\u662F\uFF0C\u9996\u5148\u6267\u884C\u5B8F\u4EFB\u52A1\uFF0C\u5F53\u5B8F\u4EFB\u52A1\u6267\u884C\u5B8C\u6210\u540E\uFF0C\u6267\u884C\u8BE5\u5B8F\u4EFB\u52A1\u6267\u884C\u7684\u65F6\u5019\u4EA7\u751F\u7684\u5FAE\u4EFB\u52A1\uFF0C\u82E5\u5FAE\u4EFB\u52A1\u5728\u6267\u884C\u8FC7\u7A0B\u4E2D\u4EA7\u751F\u4E86\u65B0\u7684\u5FAE\u4EFB\u52A1\uFF0C\u5219\u7EE7\u7EED\u6267\u884C\u8FD9\u4E2A\u5FAE\u4EFB\u52A1\uFF0C\u5FAE\u4EFB\u52A1\u6267\u884C\u5B8C\u6BD5\u540E\uFF0C\u5219\u7EE7\u7EED\u6267\u884C\u5B8F\u4EFB\u52A1\u8FDB\u884C\u4E0B\u4E00\u8F6E\u7684\u4EE3\u7801\u6267\u884C\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;---Start---&#39;</span><span class="token punctuation">)</span>  <span class="token comment">// 1\u3001\u9996\u5148\u6267\u884C -- Start --</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">sync1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">sync2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
  <span class="token comment">// 3\u3001\u5728\u8BE5\u4F4D\u7F6E\u89E6\u53D1\u4E86 sync2 \u82E5\u5FAE\u4EFB\u52A1\u5728\u6267\u884C\u8FC7\u7A0B\u4E2D\u4EA7\u751F\u4E86\u65B0\u7684\u5FAE\u4EFB\u52A1\u5219\u7EE7\u7EED\u6267\u884C\u8FD9\u4E2A\u5FAE\u4EFB\u52A1 \u5219\u89E6\u53D1sync2</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;sync1 completed&#39;</span><span class="token punctuation">)</span>
  <span class="token comment">// 5\u3001\u6700\u540E\u8F93\u51FA\u8BE5\u4EE3\u7801 sync1 completed</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">sync2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;sync2 completed&#39;</span><span class="token punctuation">)</span>
  <span class="token comment">// 4\u3001\u89E6\u53D1\u8BE5\u51FD\u6570\uFF0C\u5219\u8FDB\u884C\u8F93\u51FA sync2 completed</span>
<span class="token punctuation">}</span>
<span class="token function">sync1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 2\u3001\u89E6\u53D1\u8BE5\u51FD\u6570\u7684\u6267\u884C</span>
<span class="token comment">// \u6700\u7EC8\u8F93\u51FA ---Start--- -&gt; sync2 completed -&gt; sync1 completed</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u5728\u6B64\u4EE3\u7801\u57FA\u7840\u4E0A\u9762\u6DFB\u52A0Promise\u5C1D\u8BD5\u4E00\u4E0B\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;---Start---&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 1\u3001\u9996\u5148\u6267\u884CStart</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">sync1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">sync2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 3\u3001\u6267\u884C\u51FD\u6570\u9047\u5230\u7B2Csync2\u7684\u6267\u884C\u51FD\u6570 \u82E5\u5FAE\u4EFB\u52A1\u5728\u6267\u884C\u8FC7\u7A0B\u4E2D\u4EA7\u751F\u4E86\u65B0\u7684\u5FAE\u4EFB\u52A1\u5219\u7EE7\u7EED\u6267\u884C\u8FD9\u4E2A\u5FAE\u4EFB\u52A1 \u5219\u89E6\u53D1sync2</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;sync1 completed&#39;</span><span class="token punctuation">)</span>
  <span class="token comment">// 7\u3001\u6700\u540E\u6267\u884Csync1 completed\u7684\u8F93\u51FA</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">sync2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// 4\u3001 \u89E6\u53D1\u8BE5\u51FD\u6570\u8F93\u51FAsync2 completed</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;sync2 completed&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">sync1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 2\u3001\u4EE3\u7801\u9047\u5230\u6267\u884C\u51FD\u6570</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">// 5\u3001\u6267\u884CPromise\u7684\u8F93\u51FA</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Promise&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 6\u3001\u6267\u884Cend\u7684\u8F93\u51FA</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;----End----&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// \u6700\u7EC8\u8F93\u51FA\u987A\u5E8F\u4E3A </span>
<span class="token comment">// 1\u3001---Start---  2\u3001sync2 completed 3\u3001Promise 4\u3001----End---- 5\u3001sync1 completed</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>async\u4E0Eawait\u6267\u884C\u8FC7\u7A0B\u4E2D\uFF0C\u5F53await\u6267\u884C\u5B8C\u6BD5\u4E4B\u540E\uFF0C\u4F1A\u8DF3\u51FA\u5F53\u524Dasync\u51FD\u6570\u8FDB\u884C\u5176\u4ED6\u4EE3\u7801\u7684\u8FD0\u884C\uFF0C\u5F53\u672C\u8F6E\u5B8F\u4EFB\u52A1\u6267\u884C\u5B8C\u6BD5\u540E\uFF0C\u624D\u4F1A\u56DE\u5230async\u51FD\u6570\u4E2D\u6267\u884Cawait\u540E\u7684\u5269\u4F59\u4EE3\u7801\uFF0C\u7136\u540E\u5C06await\u4EE3\u7801\u540E\u9762\u7684\u4EE3\u7801\u63A8\u8FDB\u5FAE\u4EFB\u52A1\u961F\u5217\u4E2D\u8FDB\u884C\u6267\u884C\u3002</p><p><img src="https://oss.oh-undefined.com/image-20221015121553920.png" alt="image-20221015121553920"></p><p>\u5982\u679C\u6211\u4EEC\u518D\u7ED9Promise\u6DFB\u52A0then\uFF0C\u5E76\u4E14\u6DFB\u52A0\u4E00\u4E0BsetTimeout\u6765\u770B\u4E00\u4E0B</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;---Start---&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">sync1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">sync2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;sync1 completed&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;timeOut1&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">sync2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;sync2 completed&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">sync1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Promise&#39;</span><span class="token punctuation">)</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Promise then&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;timeOut2&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;----End----&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// start =&gt; sync2 completed (await sync2\u540E\u7684\u4EE3\u7801\u63A8\u5165\u5FAE\u4EFB\u52A1\u961F\u5217\uFF0C\u4F18\u5148\u6267\u884C\u4E3B\u7A0B\u5E8F\u4EE3\u7801)</span>
<span class="token comment">// =&gt; Promise(setTimeout1\u63A8\u5165\u5B8F\u4EFB\u52A1\u961F\u5217\uFF0C\u5176\u8FD0\u884C\u662F\u7B49\u5F85\u4E3B\u7A0B\u5E8F\u7A7A\u95F2\u6240\u4EE5\u6267\u884C\u4E0B\u65B9Promise)</span>
<span class="token comment">// =&gt; End(Promise\u6267\u884C\u5B8C\u6BD5\u540E\u9047\u5230setTimeout2 \u63A8\u5165\u5B8F\u4EFB\u52A1\u961F\u5217 \u7EE7\u7EED\u6267\u884C\u4E3B\u7A0B\u5E8F\u540C\u6B65\u4EE3\u7801console\u7684End)</span>
<span class="token comment">// =&gt; \u4E3B\u7A0B\u5E8F\u6267\u884C\u5B8C\u6BD5\u540E\u56DE\u5230Sync1\u4EE3\u7801\u4E2D\u6267\u884Cawait\u540E\u5269\u4F59\u4EE3\u7801\u8F93\u51FA Sync1 Completed</span>
<span class="token comment">// =&gt; \u5FAE\u4EFB\u52A1\u961F\u5217\u4E2D\uFF0C\u9664\u4E86Sync1\u4EE5\u5916\uFF0C\u8FD8\u6709Promise\u7684then\uFF0C\u6240\u4EE5\u8F93\u51FA Promise then</span>
<span class="token comment">// =&gt; \u4E3B\u7A0B\u5E8F\u5FAE\u4EFB\u52A1\u961F\u5217\u6E05\u7A7A\uFF0C\u7EE7\u7EED\u6267\u884C\u540E\u7EED\u5B8F\u4EFB\u52A1</span>
<span class="token comment">// =&gt; timeOut1 =&gt; timeOut2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>\u7B80\u5355\u634B\u4E00\u904D\uFF0C\u9996\u5148\u4EE3\u7801\u4ECE\u4E0A\u5230\u4E0B\u6267\u884C\uFF0C\u9996\u5148\u6267\u884CStart\uFF0C\u9047\u5230<code>setTimeout1</code>\u5219<strong>\u63A8\u5165\u5B8F\u4EFB\u52A1\u961F\u5217\u7B49\u5F85</strong>\uFF1B</li><li>\u7136\u540E\u9047\u5230Sync1\u51FD\u6570\u7684\u8C03\u7528\uFF0C\u6267\u884CSync1\u51FD\u6570\uFF0C\u51FD\u6570\u5185\u90E8<code>await Sync2</code>\u51FD\u6570\u9700\u8981\u7B49\u5F85<code>Sync2</code>\u51FD\u6570\u6267\u884C\u5B8C\u6BD5\uFF0C\u5219\u8F93\u51FA\u4E86<code>Sync2 Completed</code>\uFF0C\u7136\u540E<strong>\u8DF3\u51FA\u5F53\u524D<code>async</code>\u51FD\u6570</strong>\uFF0C\u7EE7\u7EED\u6267\u884C\u672C\u8F6E\u5B8F\u4EFB\u52A1\u4EE3\u7801\uFF1B</li><li>\u4E0B\u65B9\u9047\u5230<code>Promise</code>\u5219\u8F93\u51FA<code>Promise</code>\uFF0C<code>Promise</code>\u7684<code>.then</code>\u4E3A\u5FAE\u4EFB\u52A1\uFF0C\u5219<strong>\u63A8\u5165\u5FAE\u4EFB\u52A1\u961F\u5217\u4E2D\u7B49\u5F85\u4E3B\u7A0B\u5E8F\u6267\u884C</strong>\uFF1B</li><li>\u540E\u7EED\u9047\u5230<code>setTimeout2</code>\u5219\u63A8\u5165\u5B8F\u4EFB\u52A1\u961F\u5217\u7B49\u5F85\uFF0C\u7EE7\u7EED\u5411\u4E0B\u6267\u884C\uFF1B</li><li>\u9047\u5230console\u8F93\u51FAEnd\u540E\uFF0C\u672C\u8F6E\u5B8F\u4EFB\u52A1\u6267\u884C\u5B8C\u6BD5\uFF1B</li><li>\u8DF3\u56DEawait\u540E\u7EED\u4EE3\u7801\uFF0C\u8F93\u51FA<code>Sync1 Completed</code>\uFF1B</li><li>\u7136\u540E\u67E5\u770B\u5FAE\u4EFB\u52A1\u961F\u5217\u8F93\u51FA<code>Promise.then</code>\uFF0C\u5FAE\u4EFB\u52A1\u961F\u5217\u6E05\u7A7A\uFF1B</li><li>\u6267\u884C\u4E0B\u4E00\u8F6E\u5B8F\u4EFB\u52A1\uFF0C\u8F93\u51FAtimeout1\uFF0C\u67E5\u770B\u5FAE\u4EFB\u52A1\u961F\u5217\uFF0C\u5FAE\u4EFB\u52A1\u961F\u5217\u4E3A\u7A7A\uFF1B</li><li>\u6267\u884C\u4E0B\u4E00\u8F6E\u5B8F\u4EFB\u52A1\uFF0C\u8F93\u51FAtimeout2\uFF0C\u4EE3\u7801\u8FD0\u884C\u5B8C\u6BD5</li></ol>`,12),p=[e];function o(i,l){return s(),a("div",null,p)}var k=n(c,[["render",o],["__file","Js.html.vue"]]);export{k as default};
